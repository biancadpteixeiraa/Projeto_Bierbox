(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[44],{331:(e,t,r)=>{Promise.resolve().then(r.bind(r,4197)),Promise.resolve().then(r.bind(r,2262)),Promise.resolve().then(r.t.bind(r,2619,23))},1517:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(5155),s=r(8456);function o(e){return(0,a.jsx)("input",{...e,className:(0,s.cn)("text-xs sm:text-sm w-full p-3 bg-transparent text-gray-tertiary placeholder:text-gray-tertiary/0.6 rounded-xl border border-gray-tertiary/35",e.className)})}},2171:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(5155),s=r(8456);function o(e){let{children:t,variant:r="primary",...o}=e;return(0,a.jsx)("button",{...o,className:(0,s.cn)("whitespace-nowrap rounded-lg px-6 py-3 text-base","primary"===r&&"bg-yellow-primary text-beige-primary","secondary"===r&&"bg-yellow-secondary text-brown-tertiary","tertiary"===r&&"bg-beige-primary text-yellow-primary border border-yellow-primary border-4","quaternary"===r&&"bg-yellow-secondary text-beige-primary","quinary"===r&&"bg-green-primary text-beige-primary","senary"===r&&"bg-beige-primary text-yellow-secondary border border-yellow-secondary",o.className),children:t})}},4197:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});var a=r(5155),s=r(2171),o=r(1517),l=r(2115),n=r(4674);function i(){let{login:e}=(0,n.A)(),[t,r]=(0,l.useState)(""),[i,c]=(0,l.useState)(""),[u,m]=(0,l.useState)(!1),[d,y]=(0,l.useState)({}),h=async r=>{if(r.preventDefault(),(()=>{let e={};return t?/\S+@\S+\.\S+/.test(t)||(e.email="Informe um email v\xe1lido."):e.email="O email \xe9 obrigat\xf3rio.",i||(e.senha="A senha \xe9 obrigat\xf3ria."),y(e),0===Object.keys(e).length})()){m(!0);try{await e(t,i)}catch(e){console.error("Erro ao logar",e)}finally{m(!1)}}};return(0,a.jsxs)("form",{onSubmit:h,className:"w-full flex flex-col gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"pb-2 font-secondary text-gray-tertiary text-xs sm:text-sm",children:"Informe seu e-mail:"}),(0,a.jsx)(o.A,{id:"email",type:"email",placeholder:"E-mail aqui",value:t,onChange:e=>r(e.target.value)}),d.email&&(0,a.jsx)("p",{className:"text-red-500 text-xs sm:text-sm mt-1",children:d.email})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"senha",className:"pb-2 font-secondary text-gray-tertiary text-xs sm:text-sm",children:"Digite sua senha:"}),(0,a.jsx)(o.A,{id:"senha",type:"password",placeholder:"Senha aqui",value:i,onChange:e=>c(e.target.value)}),d.senha&&(0,a.jsx)("p",{className:"text-red-500 text-xs sm:text-sm mt-1",children:d.senha}),(0,a.jsx)("button",{type:"button",className:"font-secondary underline text-gray-quaternary text-xs sm:text-sm pb-10 pt-6",children:"Esqueci minha senha!"})]}),(0,a.jsx)(s.A,{type:"submit",disabled:u,className:"w-full py-4 font-medium text-lg flex items-center justify-center",variant:"quaternary",children:u?(0,a.jsxs)("svg",{className:"animate-spin h-5 w-5 mr-3 text-white",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]}):"Entrar"})]})}},4674:(e,t,r)=>{"use strict";r.d(t,{A:()=>u,AuthProvider:()=>c});var a=r(5155),s=r(2115),o=r(5328),l=r(63),n=r(4744);let i=(0,s.createContext)(void 0);function c(e){let{children:t}=e,[r,c]=(0,s.useState)(null),[u,m]=(0,s.useState)(null),[d,y]=(0,s.useState)(!0),h=(0,l.useRouter)();(0,s.useEffect)(()=>{let e=localStorage.getItem("token"),t=localStorage.getItem("user");e&&c(e),t&&m(JSON.parse(t)),y(!1)},[]);let x=async(e,t)=>{y(!0);try{let r=await o.A.post("/users/login",{email:e,senha:t});if(r.data.success){let{token:e,user:t}=r.data;c(e),m(t),localStorage.setItem("token",e),localStorage.setItem("user",JSON.stringify(t));let a=localStorage.getItem("redirectAfterAuth");a?(localStorage.removeItem("redirectAfterAuth"),h.push(a)):h.push("/dashboard/".concat(t.id))}else n.oR.error("Falha ao realizar login, tente novamente!"),console.error(r.data.message)}catch(e){console.error("Erro no login:",e),n.oR.error("Falha no login. Verifique suas credenciais!")}finally{y(!1)}},g=async(e,t,r,a)=>{y(!0);try{let s=await o.A.post("/users/register",{nome_completo:e,email:t,cpf:r,senha:a});s.data.success?(n.oR.success("Cadastro realizado com sucesso!"),await x(t,a)):(n.oR.error("Falha no cadastro. Tente novamente."),console.error(s.data.message))}catch(e){console.error("Erro no cadastro:",e),n.oR.error("Falha no cadastro. Tente novamente.")}finally{y(!1)}};return(0,a.jsx)(i.Provider,{value:{isAuthenticated:!!r,login:x,loading:d,register:g,logout:()=>{c(null),m(null),localStorage.removeItem("token"),localStorage.removeItem("user"),y(!1),h.push("/")},token:r,user:u},children:t})}function u(){let e=(0,s.useContext)(i);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},5328:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=r(5125).A.create({baseURL:"https://54327051f610.ngrok-free.app",headers:{"ngrok-skip-browser-warning":"true"}})},8456:(e,t,r)=>{"use strict";r.d(t,{cn:()=>o});var a=r(2821),s=r(5889);function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}}},e=>{e.O(0,[557,889,262,619,441,255,358],()=>e(e.s=331)),_N_E=e.O()}]);