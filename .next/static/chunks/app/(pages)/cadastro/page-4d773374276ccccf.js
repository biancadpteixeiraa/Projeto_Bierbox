(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[248],{1517:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(5155),s=r(8456);function o(e){return(0,a.jsx)("input",{...e,className:(0,s.cn)("text-xs sm:text-sm w-full p-3 bg-transparent text-gray-tertiary placeholder:text-gray-tertiary/0.6 rounded-xl border border-gray-tertiary/35",e.className)})}},2171:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(5155),s=r(8456);function o(e){let{children:t,variant:r="primary",...o}=e;return(0,a.jsx)("button",{...o,className:(0,s.cn)("whitespace-nowrap rounded-lg px-6 py-3 text-base","primary"===r&&"bg-yellow-primary text-beige-primary","secondary"===r&&"bg-yellow-secondary text-brown-tertiary","tertiary"===r&&"bg-beige-primary text-yellow-primary border border-yellow-primary border-4","quaternary"===r&&"bg-yellow-secondary text-beige-primary","quinary"===r&&"bg-green-primary text-beige-primary","senary"===r&&"bg-beige-primary text-yellow-secondary border border-yellow-secondary",o.className),children:t})}},4255:(e,t,r)=>{"use strict";r.d(t,{default:()=>c});var a=r(5155),s=r(2262),o=r(2171),l=r(1517),n=r(2115),i=r(4674);function c(){let{register:e,loading:t}=(0,i.A)(),[r,c]=(0,n.useState)(""),[m,d]=(0,n.useState)(""),[x,u]=(0,n.useState)(""),[h,y]=(0,n.useState)(""),[p,g]=(0,n.useState)(""),[f,b]=(0,n.useState)(!1),[v,j]=(0,n.useState)(!1),[N,S]=(0,n.useState)({}),w=async t=>{t.preventDefault(),(()=>{let e={};return r||(e.nomeCompleto="Nome \xe9 obrigat\xf3rio."),m?/\S+@\S+\.\S+/.test(m)||(e.email="Informe um email v\xe1lido."):e.email="Email \xe9 obrigat\xf3rio.",x||(e.cpf="CPF \xe9 obrigat\xf3rio."),h?h.length<8&&(e.senha="Senha deve ter pelo menos 8 caracteres."):e.senha="Senha \xe9 obrigat\xf3ria.",h!==p&&(e.confirmSenha="Senhas n\xe3o coincidem."),f||(e.termos="Voc\xea precisa aceitar os termos."),S(e),0===Object.keys(e).length})()&&await e(r,m,x,h)};return(0,a.jsxs)("form",{onSubmit:w,className:"w-full flex flex-col gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"nomeCompleto",className:"pb-2 font-secondary text-gray-tertiary text-xs sm:text-sm",children:"Informe seu nome completo:"}),(0,a.jsx)(l.A,{type:"text",id:"nomeCompleto",placeholder:"Nome aqui",value:r,onChange:e=>c(e.target.value)}),N.nomeCompleto&&(0,a.jsx)("p",{className:"text-red-600 text-xs sm:text-sm mt-1",children:N.nomeCompleto})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"pb-2 font-secondary text-gray-tertiary text-xs sm:text-sm",children:"Qual \xe9 seu e-mail?"}),(0,a.jsx)(l.A,{type:"email",id:"email",placeholder:"E-mail aqui",value:m,onChange:e=>d(e.target.value)}),N.email&&(0,a.jsx)("p",{className:"text-red-600 text-xs sm:text-sm mt-1",children:N.email})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"cpf",className:"pb-2 font-secondary text-gray-tertiary text-xs sm:text-sm",children:"Informe seu CPF:"}),(0,a.jsx)(l.A,{type:"text",placeholder:"CPF aqui",id:"cpf",value:x,onChange:e=>u(e.target.value)}),N.cpf&&(0,a.jsx)("p",{className:"text-red-600 text-xs sm:text-sm mt-1",children:N.cpf})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsxs)("div",{className:"flex justify-between pb-2",children:[(0,a.jsx)("label",{htmlFor:"senha",className:"font-secondary text-gray-tertiary text-xs sm:text-sm w-full",children:"Crie uma senha:"}),(0,a.jsxs)("button",{type:"button",className:"flex items-center",onClick:()=>j(!v),children:[(0,a.jsx)(s.Icon,{icon:v?"mdi:eye-off":"mdi:eye",className:"text-gray-tertiary text-base"}),(0,a.jsx)("p",{className:"pl-2 text-gray-tertiary text-xs sm:text-sm",children:v?"Hide":"Show"})]})]}),(0,a.jsx)(l.A,{type:v?"text":"password",placeholder:"Senha aqui",id:"senha",value:h,onChange:e=>y(e.target.value)}),(0,a.jsx)("p",{className:"font-secondary text-gray-quaternary text-xs pt-2",children:"Crie uma senha com mais de 8 d\xedgitos contendo n\xfameros e letras."}),N.senha&&(0,a.jsx)("p",{className:"text-red-600 text-xs sm:text-sm mt-1",children:N.senha})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"confirmSenha",className:"pb-2 font-secondary text-gray-tertiary text-xs sm:text-sm",children:"Confirme sua senha:"}),(0,a.jsx)(l.A,{placeholder:"Confirme sua senha aqui",id:"confirmSenha",type:"password",value:p,onChange:e=>g(e.target.value)}),N.confirmSenha&&(0,a.jsx)("p",{className:"text-red-600 text-xs sm:text-sm mt-1",children:N.confirmSenha})]}),(0,a.jsxs)("div",{className:"flex items-center pb-5 gap-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:f,onChange:e=>b(e.target.checked),className:"size-3 appearance-none rounded-sm border-2 border-gray-primary bg-beige-primary checked:border-gray-400 checked:bg-yellow-secondary"}),(0,a.jsxs)("p",{className:"font-secondary text-gray-quaternary text-xs sm:text-sm",children:["Estou de acordo com os ",(0,a.jsx)("span",{className:"underline",children:"Termos de Uso"})," e ",(0,a.jsx)("span",{className:"underline",children:"Pol\xedticas de Privacidade."})]})]}),N.termos&&(0,a.jsx)("p",{className:"text-red-600 text-xs sm:text-sm mb-2",children:N.termos}),(0,a.jsx)(o.A,{variant:"quaternary",type:"submit",disabled:t,className:"w-full py-4 font-medium text-lg flex items-center justify-center",children:t?(0,a.jsxs)("svg",{className:"animate-spin h-5 w-5 mr-3 text-white",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]}):"Realizar cadastro"})]})}},4674:(e,t,r)=>{"use strict";r.d(t,{A:()=>m,AuthProvider:()=>c});var a=r(5155),s=r(2115),o=r(5328),l=r(63),n=r(4744);let i=(0,s.createContext)(void 0);function c(e){let{children:t}=e,[r,c]=(0,s.useState)(null),[m,d]=(0,s.useState)(null),[x,u]=(0,s.useState)(!0),h=(0,l.useRouter)();(0,s.useEffect)(()=>{let e=localStorage.getItem("token"),t=localStorage.getItem("user");e&&c(e),t&&d(JSON.parse(t)),u(!1)},[]);let y=async(e,t)=>{u(!0);try{let r=await o.A.post("/users/login",{email:e,senha:t});if(r.data.success){let{token:e,user:t}=r.data;c(e),d(t),localStorage.setItem("token",e),localStorage.setItem("user",JSON.stringify(t));let a=localStorage.getItem("redirectAfterAuth");a?(localStorage.removeItem("redirectAfterAuth"),h.push(a)):h.push("/dashboard/".concat(t.id))}else n.oR.error("Falha ao realizar login, tente novamente!"),console.error(r.data.message)}catch(e){console.error("Erro no login:",e),n.oR.error("Falha no login. Verifique suas credenciais!")}finally{u(!1)}},p=async(e,t,r,a)=>{u(!0);try{let s=await o.A.post("/users/register",{nome_completo:e,email:t,cpf:r,senha:a});s.data.success?(n.oR.success("Cadastro realizado com sucesso!"),await y(t,a)):(n.oR.error("Falha no cadastro. Tente novamente."),console.error(s.data.message))}catch(e){console.error("Erro no cadastro:",e),n.oR.error("Falha no cadastro. Tente novamente.")}finally{u(!1)}};return(0,a.jsx)(i.Provider,{value:{isAuthenticated:!!r,login:y,loading:x,register:p,logout:()=>{c(null),d(null),localStorage.removeItem("token"),localStorage.removeItem("user"),u(!1),h.push("/")},token:r,user:m},children:t})}function m(){let e=(0,s.useContext)(i);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},5328:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=r(5125).A.create({baseURL:"https://54327051f610.ngrok-free.app",headers:{"ngrok-skip-browser-warning":"true"}})},6300:(e,t,r)=>{Promise.resolve().then(r.bind(r,4255)),Promise.resolve().then(r.bind(r,2262)),Promise.resolve().then(r.t.bind(r,2619,23))},8456:(e,t,r)=>{"use strict";r.d(t,{cn:()=>o});var a=r(2821),s=r(5889);function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}}},e=>{e.O(0,[557,889,262,619,441,255,358],()=>e(e.s=6300)),_N_E=e.O()}]);