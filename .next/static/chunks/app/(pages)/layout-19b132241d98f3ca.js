(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[133],{1006:()=>{},2424:e=>{e.exports={style:{fontFamily:"'Montserrat', 'Montserrat Fallback'",fontStyle:"normal"},className:"__className_fca8ee"}},4674:(e,r,o)=>{"use strict";o.d(r,{A:()=>u,AuthProvider:()=>l});var a=o(5155),t=o(2115),s=o(5328),n=o(63),i=o(4744);let c=(0,t.createContext)(void 0);function l(e){let{children:r}=e,[o,l]=(0,t.useState)(null),[u,d]=(0,t.useState)(null),[h,m]=(0,t.useState)(!0),f=(0,n.useRouter)();(0,t.useEffect)(()=>{let e=localStorage.getItem("token"),r=localStorage.getItem("user");e&&l(e),r&&d(JSON.parse(r)),m(!1)},[]);let g=async(e,r)=>{m(!0);try{let o=await s.A.post("/users/login",{email:e,senha:r});if(o.data.success){let{token:e,user:r}=o.data;l(e),d(r),localStorage.setItem("token",e),localStorage.setItem("user",JSON.stringify(r));let a=localStorage.getItem("redirectAfterAuth");a?(localStorage.removeItem("redirectAfterAuth"),f.push(a)):f.push("/dashboard/".concat(r.id))}else i.oR.error("Falha ao realizar login, tente novamente!"),console.error(o.data.message)}catch(e){console.error("Erro no login:",e),i.oR.error("Falha no login. Verifique suas credenciais!")}finally{m(!1)}},v=async(e,r,o,a)=>{m(!0);try{let t=await s.A.post("/users/register",{nome_completo:e,email:r,cpf:o,senha:a});t.data.success?(i.oR.success("Cadastro realizado com sucesso!"),await g(r,a)):(i.oR.error("Falha no cadastro. Tente novamente."),console.error(t.data.message))}catch(e){console.error("Erro no cadastro:",e),i.oR.error("Falha no cadastro. Tente novamente.")}finally{m(!1)}};return(0,a.jsx)(c.Provider,{value:{isAuthenticated:!!o,login:g,loading:h,register:v,logout:()=>{l(null),d(null),localStorage.removeItem("token"),localStorage.removeItem("user"),m(!1),f.push("/")},token:o,user:u},children:r})}function u(){let e=(0,t.useContext)(c);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},5328:(e,r,o)=>{"use strict";o.d(r,{A:()=>a});let a=o(5125).A.create({baseURL:"https://54327051f610.ngrok-free.app",headers:{"ngrok-skip-browser-warning":"true"}})},5863:(e,r,o)=>{Promise.resolve().then(o.t.bind(o,1006,23)),Promise.resolve().then(o.bind(o,4674)),Promise.resolve().then(o.bind(o,7941)),Promise.resolve().then(o.t.bind(o,9294,23)),Promise.resolve().then(o.t.bind(o,2424,23)),Promise.resolve().then(o.bind(o,4744))},7941:(e,r,o)=>{"use strict";o.d(r,{CarrinhoProvider:()=>h,O:()=>m});var a=o(5155),t=o(2115),s=o(5328);async function n(e){return(await s.A.get("/carrinho",{headers:{Authorization:"Bearer ".concat(e)}})).data}async function i(e,r,o,a){return(await s.A.post("/carrinho/adicionar",{box_id:r,quantidade:o,tipo_plano:a},{headers:{Authorization:"Bearer ".concat(e)}})).data}async function c(e,r){return(await s.A.delete("/carrinho/remover/".concat(r),{headers:{Authorization:"Bearer ".concat(e)}})).data}var l=o(4674),u=o(4744);let d=(0,t.createContext)(void 0);function h(e){let{children:r}=e,{token:o}=(0,l.A)(),[s,h]=(0,t.useState)(null),m=async()=>{if(o)try{let e=await n(o);e.success?h(e.carrinho):u.oR.error(e.message||"Erro ao carregar carrinho!")}catch(e){console.error(e),u.oR.error("Erro inesperado ao carregar carrinho!")}};(0,t.useEffect)(()=>{if(!o)return void h(null);m()},[o]);let f=async(e,r,a)=>{if(o){if(null==s?void 0:s.itens.find(r=>r.box_id===e))return void u.oR.warning("Esse item j\xe1 est\xe1 no seu carrinho!");try{let t=await i(o,e,r,a);t.success?(h(t.carrinho),u.oR.success("Item adicionado ao carrinho!")):(u.oR.error(t.message||"Erro ao adicionar item ao carrinho!"),console.error("Erro ao adicionar item ao carrinho:",t.message))}catch(e){console.error(e),u.oR.error("Erro inesperado ao adicionar item!")}}},g=async e=>{if(!o)return;let r=await c(o,e);r.success?(h(r.carrinho),u.oR.success("Item removido do carrinho com sucesso!")):(u.oR.error("Erro ao remover item do carrinho!"),console.error("Erro ao remover item do carrinho: "+r.message))};return(0,a.jsx)(d.Provider,{value:{carrinho:s,loadCarrinho:m,addItem:f,removeItem:g},children:r})}function m(){let e=(0,t.useContext)(d);if(!e)throw Error("useCarrinho must be used within a CarrinhoProvider");return e}},9294:e=>{e.exports={style:{fontFamily:"'Dela Gothic One', 'Dela Gothic One Fallback'",fontWeight:400,fontStyle:"normal"},className:"__className_2d2d2d"}}},e=>{e.O(0,[541,460,764,557,441,255,358],()=>e(e.s=5863)),_N_E=e.O()}]);